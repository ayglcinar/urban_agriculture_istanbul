<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title></title>
    <meta
      name="viewport"
      content="initial-scale=1,maximum-scale=1,user-scalable=no" />
    <script src="https://api.tiles.mapbox.com/mapbox-gl-js/v1.4.0/mapbox-gl.js"></script>
    <link href="https://api.tiles.mapbox.com/mapbox-gl-js/v1.4.0/mapbox-gl.css" rel="stylesheet"/>
    <link
      href="https://fonts.googleapis.com/css?family=PT+Sans"
      rel="stylesheet"
      type="text/css" />
    <style>
      body { margin: 0; padding: 0; }
      #map { position: fixed; top: 0; bottom: 0; width: 60%;}
      img { max-width: 100%; height: auto;}
      div { font-family: "PT Sans", sans-serif;}
    </style>
     
  </head>

  <body>
    
    <style>
      #features {
        width: 40%;
        margin-left: 60%;
        font-family: "PT Sans", sans-serif;
        overflow-y: scroll;
        background-color: #fef5f7;
      }
      section {
        padding: 25px 50px;
        line-height: 25px;
        border-bottom: 1px solid #ddd;
        opacity: 0.25;
        font-size: 13px;
      }
      section.active {
        opacity: 1;
      }
      section:last-child {
        border-bottom: none;
        margin-bottom: 400px;
      }
    </style>

    <div id='map'></div> 
        <div id='features'>
        <section id='intro' class='active'>
        <h3>Beyoğlu'nda Çocuk</h3>
        <p> ACT for the Disappeared is a Beirut-based human rights organization that works to create awareness and policies 
          to uncover the fate of thousands of people that went missing during the 15-year Lebanese Civil War between 1976 and 1990. 
          Founded in 2010, they have been collaborating with the Committee of the Families of the Kidnapped and Disappeared in Lebanon 
          and the International Committee of the Red Cross to lobby for a law and a national committee to investigate the fate of 
          the missing.  </p>
          </section>
          
    <section id="gezi">
        <h3>Gezi Parkı</h3>
        <img src="http://uploads.knightlab.com/storymapjs/fbb70813e6869662a52896a717be1b4e/sites-of-memory/_images/Bachoura by cdn3_Fotor.jpg"/>
        <p>tanım <br/></p>
        <a href="https://sehirdedektifi.wixsite.com/hafizaharitasi/gezi-parki" target="_blank" rel="">Okumaya devam et</a>
      </section>

    <section id="taksim">
        <h3>Taksim Meydanı</h3>
        <img src=""/>
        <p>tanım <br/></p>
        <a href="https://sehirdedektifi.wixsite.com/hafizaharitasi/taksim-meydani" target="_blank" rel="">Okumaya devam et</a>
      </section>

    <section id="esayan">
        <h3>Esayan Okulu</h3>
        <img src=""/>
        <p>tanım <br/></p>
        <a href="http://mapofmemorylebanon.webflow.io/en/sites/tal-el-zaatar" target="_blank" rel="">Okumaya devam et</a>
      </section>
          
     <section id="ataturk">
        <h3>Atatürk Lisesi</h3>
        <img src="http://uploads.knightlab.com/storymapjs/fbb70813e6869662a52896a717be1b4e/sites-of-memory/_images/Bachoura by cdn3_Fotor.jpg"/>
        <p>tanım <br/></p>
        <a href="http://mapofmemorylebanon.webflow.io/en/sites/tal-el-zaatar" target="_blank" rel="">Okumaya devam et</a>
      </section>

    <section id="galatasaray">
        <h3>Galatasaray Lisesi</h3>
        <img src=""/>
        <p>tanım <br/></p>
        <a href="http://mapofmemorylebanon.webflow.io/en/sites/tal-el-zaatar" target="_blank" rel="">Okumaya devam et</a>
      </section>

    <section id="kule">
        <h3>Galata Kulesi</h3>
        <img src=""/>
        <p>tanım <br/></p>
        <a href="http://mapofmemorylebanon.webflow.io/en/sites/tal-el-zaatar" target="_blank" rel="">Okumaya devam et</a>
      </section>
          
    <section id="sur">
        <h3>Galata Surları</h3>
        <img src=""/>
        <p>tanım <br/></p>
        <a href="http://mapofmemorylebanon.webflow.io/en/sites/tal-el-zaatar" target="_blank" rel="">Okumaya devam et</a>
      </section>
          
    <section id="karakoy">
        <h3>Karaköy Meydanı</h3>
        <img src=""/>
        <p>tanım <br/></p>
        <a href="http://mapofmemorylebanon.webflow.io/en/sites/tal-el-zaatar" target="_blank" rel="">Okumaya devam et</a>
      </section>
          
      <section id="kamondo">
        <h3>Kamondo Merdivenleri</h3>
        <img src=""/>
        <p>tanım <br/></p>
        <a href="http://mapofmemorylebanon.webflow.io/en/sites/tal-el-zaatar" target="_blank" rel="">Okumaya devam et</a>
      </section>
          
    <section id="tepebasi">
        <h3>Tepebaşı</h3>
        <img src=""/>
        <p>tanım <br/></p>
        <a href="http://mapofmemorylebanon.webflow.io/en/sites/tal-el-zaatar" target="_blank" rel="">Okumaya devam et</a>
      </section>
          
    <section id="postacilar">
        <h3>Postacılar Yokuşu</h3>
        <img src=""/>
        <p>tanım <br/></p>
        <a href="http://mapofmemorylebanon.webflow.io/en/sites/tal-el-zaatar" target="_blank" rel="">Okumaya devam et</a>
      </section>
          
     <section id="kumbaraci">
        <h3>Kumbaracı Yokuşu</h3>
        <img src=""/>
        <p>tanım <br/></p>
        <a href="http://mapofmemorylebanon.webflow.io/en/sites/tal-el-zaatar" target="_blank" rel="">Okumaya devam et</a>
      </section>
          
    <section id="tarlabasi">
        <h3>Tarlabaşı Bulvarı</h3>
        <img src=""/>
        <p>tanım <br/></p>
        <a href="http://mapofmemorylebanon.webflow.io/en/sites/tal-el-zaatar" target="_blank" rel="">Okumaya devam et</a>
      </section>
          
    <section id="ttm">
        <h3>Tarlabaşı Toplum Merkezi</h3>
        <img src=""/>
        <p>tanım <br/></p>
        <a href="http://mapofmemorylebanon.webflow.io/en/sites/tal-el-zaatar" target="_blank" rel="">Okumaya devam et</a>
      </section>
          
      <section id="stad">
        <h3>Kasımpaşa Stadı</h3>
        <img src=""/>
        <p>tanım <br/></p>
        <a href="http://mapofmemorylebanon.webflow.io/en/sites/tal-el-zaatar" target="_blank" rel="">Okumaya devam et</a>
      </section>
          
    </div>
    
      <script>

    mapboxgl.accessToken = 'pk.eyJ1IjoiYXNwZWwxNiIsImEiOiJjazFrcTFreWQxaWQwM25wNnB5OGtob2cyIn0.z-P2ljsucUiDSe9lpECDMA';

    // create the map
    var map = window.map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/aspel16/ck4libn2s1e0u1cs4pqljlm2n',
        center: [28.977505, 41.036864],
        zoom: 9,
        bearing: 22, //arttirma
        pitch: 0,
        hash: true,
        container: 'map',
        antialias: true }
    );

    // Display buildings in 3D
    map.on('load', function() {

    var layers = map.getStyle().layers;
    var labelLayerId;
    for (var i = 0; i < layers.length; i++) {
        if (layers[i].type === 'symbol' && layers[i].layout['text-field']) {
            labelLayerId = layers[i].id; 
            break; 
    }}

    map.addLayer({
        'id': '3d-buildings',
        'source': 'composite',
        'source-layer': 'building',
        'filter': ['==', 'extrude', 'true'],
        'type': 'fill-extrusion',
        'minzoom': 15,
        'paint': {
        'fill-extrusion-color': '#aaa',
        // use an 'interpolate' expression to add a smooth transition effect to the
        // buildings as the user zooms in
        'fill-extrusion-height': ["interpolate", ["linear"], ["zoom"], 15, 0, 15.05, ["get", "height"]],
        'fill-extrusion-base': ["interpolate", ["linear"], ["zoom"], 15, 0, 15.05, ["get", "min_height"]],
        'fill-extrusion-opacity': .6 }
    }, labelLayerId); });
        
        
    // SECTIONS
    var chapters = {
        'intro': {
        bearing: 0,
        center: [28.977505, 41.036864],
        zoom: 10,
        bearing: 22,
        pitch: 0,
        },
        'gezi': {
        duration: 6000,
        center: [28.986663, 41.037972],
        bearing: -30,
        zoom: 15.5,
        pitch: 30,
        speed: 0.3
        },
        'taksim': {
        bearing: 0,
        center: [28.985087, 41.036925],
        bearing: 0,
        zoom: 16,
        pitch: 0,
        speed: 0.1
        },
        'esayan': {
        duration: 6000,
        center: [28.984048, 41.035048],
        bearing: -30,
        zoom: 18,
        pitch: 30,
        speed: 0.3
        },
        'ataturk': {
        bearing: 0,
        center: [28.983238, 41.034667],
        bearing: 0,
        zoom: 18,
        pitch: 0,
        speed: 0.2
        },
        'tarlabasi': {
        bearing: 0,
        center: [28.979600, 41.036199],
        bearing: 0,
        zoom: 16,
        pitch: 0,
        speed: 0.3
        },
        'ttm': {
        duration: 6000,
        center: [28.978000, 41.037861],
        bearing: -30,
        zoom: 15.5,
        pitch: 30
        },
        'galatasaray': {
        duration: 6000,
        center: [28.977686, 41.033345],
        bearing: -30,
        zoom: 15.5,
        pitch: 30,
        speed: 0.3
        },
        'stad': {
        duration: 6000,
        center: [28.972639, 41.032719],
        bearing: -30,
        zoom: 15.5,
        pitch: 30,
        speed: 0.3
        },
        'tepebasi': {
        duration: 6000,
        center: [28.974554, 41.032261],
        bearing: -30,
        zoom: 15.5,
        pitch: 30,
        speed: 0.3
        },
        'postacilar': {
        bearing: 0,
        center: [28.976117, 41.030423],
        bearing: 0,
        zoom: 16,
        pitch: 0,
        speed: 0.3
        },
        'kumbaraci': {
        duration: 6000,
        center: [28.977347, 41.028009],
        bearing: -30,
        zoom: 15.5,
        pitch: 30,
        speed: 0.3
        },
        'kule': {
        duration: 6000,
        center: [28.974249, 41.025854,],
        bearing: -30,
        zoom: 15.5,
        pitch: 30
        },
        'sur': {
        duration: 6000,
        center: [28.972760, 41.025069],
        bearing: -30,
        zoom: 15.5,
        pitch: 30,
        speed: 0.3
        },
        'kamondo': {
        duration: 6000,
        center: [28.973748, 41.023945],
        bearing: -30,
        zoom: 15.5,
        pitch: 30
        },
        'karakoy': {
        bearing: 0,
        center: [28.975287, 41.022190],
        bearing: 0,
        zoom: 16,
        pitch: 0,
        speed: 0.3
        },

        };
        
        

    //Function to run the story
    // On every scroll event, check which element is on screen
    window.onscroll = function() {
        var chapterNames = Object.keys(chapters);
        for (var i = 0; i < chapterNames.length; i++) {
            var chapterName = chapterNames[i];
                if (isElementOnScreen(chapterName)) {
                    setActiveChapter(chapterName);
                    break; }}
    };
    var activeChapterName = 'intro'; //Change this to match the first chapter of your story
    function setActiveChapter(chapterName) {
        if (chapterName === activeChapterName) return;
        map.flyTo(chapters[chapterName]);
        document.getElementById(chapterName).setAttribute('class', 'active');
        document.getElementById(activeChapterName).setAttribute('class', '');
        activeChapterName = chapterName;
    }
    function isElementOnScreen(id) {
        var element = document.getElementById(id);
        var bounds = element.getBoundingClientRect();
        return bounds.top < window.innerHeight && bounds.bottom > 0;
    };

</script>

</body>
</html>
