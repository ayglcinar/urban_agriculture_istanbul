<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title></title>
    <meta
      name="viewport"
      content="initial-scale=1,maximum-scale=1,user-scalable=no" />
    <script src="https://api.tiles.mapbox.com/mapbox-gl-js/v1.4.0/mapbox-gl.js"></script>
    <link href="https://api.tiles.mapbox.com/mapbox-gl-js/v1.4.0/mapbox-gl.css" rel="stylesheet"/>
    <link
      href="https://fonts.googleapis.com/css?family=PT+Sans"
      rel="stylesheet"
      type="text/css" />
    <link href="https://fonts.googleapis.com/css?family=Josefin+Sans&display=swap" rel="stylesheet">
    <style>
      body { margin: 0; padding: 0; }
      #map { position: fixed; top: 0; bottom: 0; width: 65%;}
      img { max-width: 100%; height: auto; padding: 3px; border: 1px solid #a2abb4;
         }
    </style>
     
  </head>

  <body>
    
    <style>
      #features {
        width: 35%;
        margin-left: 65%;
        font-family: "PT Sans", sans-serif;
        overflow-y: scroll;
        background-color: #fef5f7;
        color: #516576;
      }
      h2 {
        text-align: center;
        font-family: "Josefin Sans", sans-serif;
      }
      h3 {
        text-align: center;
        font-family: "Josefin Sans", sans-serif;
        color: #52728e;
      }
      section {
        padding: 25px 50px;
        line-height: 25px;
        border-bottom: 1px solid #ddd;
        opacity: 0.25;
        font-size: 13px;
      }
      section.active {
        opacity: 1;
      }
      section:last-child {
        border-bottom: none;
        margin-bottom: 400px;
      }
      .fin {
        opacity: 0;
      }
    </style>

    <div id='map'></div> 
        <div id='features'>
        <section id='intro' class='active'>
        <h2>Çocuklar için Beyoğlu 12</h2>
        <p> 
          Burası dünyanın eski yerleşimlerinden biri. Tarih boyunca pek çok farklı insan, Beyoğlu'nda yaşamış, 
          gezmiş, eğlenmiş ve oyunlar oynamış. Beyoğlu'ndan yolu geçenler, tozuna ayağı değenler hep hikayeler 
          anlatmış, izler bırakmışlar ona. <br><br> Beyoğlu'nda herkesin, hepimizin bir hikayesi var. 
          </p>
          </section>
          
    <section id="gezi">
        <h3>Gezi Parkı</h3>
        <img src="http://uploads.knightlab.com/storymapjs/fbb70813e6869662a52896a717be1b4e/sites-of-memory/_images/Bachoura by cdn3_Fotor.jpg"/>
        <p>tanım <br/></p>
        <a href="https://sehirdedektifi.wixsite.com/hafizaharitasi/gezi-parki" target="_blank" rel="">Okumaya devam et</a>
      </section>

    <section id="taksim">
        <h3>Taksim Meydanı</h3>
        <img src=""/>
        <p>tanım <br/></p>
        <a href="https://sehirdedektifi.wixsite.com/hafizaharitasi/taksim" target="_blank" rel="">Okumaya devam et</a>
      </section>

    <section id="esayan">
        <h3>Esayan Lisesi</h3>
        <img src=""/>
        <p>tanım <br/></p>
        <a href="https://sehirdedektifi.wixsite.com/hafizaharitasi/esayan" target="_blank" rel="">Okumaya devam et</a>
      </section>
          
     <section id="ataturk">
        <h3>Atatürk Lisesi</h3>
        <img src="http://uploads.knightlab.com/storymapjs/fbb70813e6869662a52896a717be1b4e/sites-of-memory/_images/Bachoura by cdn3_Fotor.jpg"/>
        <p>tanım <br/></p>
        <a href="https://sehirdedektifi.wixsite.com/hafizaharitasi/ataturk-lisesi" target="_blank" rel="">Okumaya devam et</a>
      </section>
          
      <section id="tarlabasi">
        <h3>Tarlabaşı Bulvarı</h3>
        <img src=""/>
        <p>tanım <br/></p>
        <a href="https://sehirdedektifi.wixsite.com/hafizaharitasi/tarlabasi" target="_blank" rel="">Okumaya devam et</a>
      </section>
          
    <section id="ttm">
        <h3>Tarlabaşı Toplum Merkezi</h3>
        <img src=""/>
        <p>tanım <br/></p>
        <a href="https://sehirdedektifi.wixsite.com/hafizaharitasi/tarlabasi-toplum" target="_blank" rel="">Okumaya devam et</a>
      </section>

    <section id="galatasaray">
        <h3>Galatasaray Lisesi</h3>
        <img src=""/>
        <p>tanım <br/></p>
        <a href="http://https://sehirdedektifi.wixsite.com/hafizaharitasi/galatasaray" target="_blank" rel="">Okumaya devam et</a>
      </section>
                
    <section id="postacilar">
        <h3>Postacılar Yokuşu</h3>
        <img src=""/>
        <p>tanım <br/></p>
        <a href="https://sehirdedektifi.wixsite.com/hafizaharitasi/postacilar" target="_blank" rel="">Okumaya devam et</a>
      </section>
          
     <section id="kumbaraci">
        <h3>Kumbaracı Yokuşu</h3>
        <img src=""/>
        <p>tanım <br/></p>
        <a href="https://sehirdedektifi.wixsite.com/hafizaharitasi/kumbaraci" target="_blank" rel="">Okumaya devam et</a>
      </section>
          
     <section id="stad">
        <h3>Kasımpaşa Stadı</h3>
        <img src=""/>
        <p>tanım <br/></p>
        <a href="https://sehirdedektifi.wixsite.com/hafizaharitasi/kasimpasa" target="_blank" rel="">Okumaya devam et</a>
      </section>
         
    <section id="tepebasi">
        <h3>Tepebaşı</h3>
        <img src=""/>
        <p>tanım <br/></p>
        <a href="https://sehirdedektifi.wixsite.com/hafizaharitasi/tepebasi" target="_blank" rel="">Okumaya devam et</a>
      </section>
               
     <section id="kule">
        <h3>Galata Kulesi</h3>
        <img src=""/>
        <p>tanım <br/></p>
        <a href="https://sehirdedektifi.wixsite.com/hafizaharitasi/galata-kulesi" target="_blank" rel="">Okumaya devam et</a>
      </section>
          
    <section id="sur">
        <h3>Galata Surları</h3>
        <img src=""/>
        <p>tanım <br/></p>
        <a href="https://sehirdedektifi.wixsite.com/hafizaharitasi/galata-surlari" target="_blank" rel="">Okumaya devam et</a>
      </section>
            
      <section id="kamondo">
        <h3>Kamondo Merdivenleri</h3>
        <img src=""/>
        <p>tanım <br/></p>
        <a href="https://sehirdedektifi.wixsite.com/hafizaharitasi/kamondo" target="_blank" rel="">Okumaya devam et</a>
      </section>
          
       <section id="karakoy">
        <h3>Karaköy Meydanı</h3>
        <img src=""/>
        <p>tanım tanim tanim<br/></p>
        <a href="https://sehirdedektifi.wixsite.com/hafizaharitasi/karakoy" target="_blank" rel="">Okumaya devam et</a>
      </section>
          
           <section id="end">
             <h3> <span class="fin"> son </span> </h3>
     
        <p><span class="fin"> Burası dünyanın eski yerleşimlerinden biri. Tarih boyunca pek çok farklı insan, Beyoğlu'nda yaşamış, 
          gezmiş, eğlenmiş ve oyunlar oynamış. Beyoğlu'ndan yolu geçenler, tozuna ayağı değenler hep hikayeler 
          anlatmış, izler bırakmışlar ona. <br><br> Beyoğlu'nda herkesin, hepimizin bir hikayesi var. </span></p>
        
      </section>
          
     
          
    </div>
    
      <script>

    mapboxgl.accessToken = 'pk.eyJ1IjoiYXNwZWwxNiIsImEiOiJjazFrcTFreWQxaWQwM25wNnB5OGtob2cyIn0.z-P2ljsucUiDSe9lpECDMA';

    // create the map
    var map = window.map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/aspel16/ck4libn2s1e0u1cs4pqljlm2n',
      
        center: [29.0467, 41.0845],
        zoom: 9.8,
        bearing: 2,
        pitch: 0,
        hash: true,
        container: 'map',
        antialias: true }
    );

    // Display buildings in 3D
    map.on('load', function() {

    var layers = map.getStyle().layers;
    var labelLayerId;
    for (var i = 0; i < layers.length; i++) {
        if (layers[i].type === 'symbol' && layers[i].layout['text-field']) {
            labelLayerId = layers[i].id; 
            break; 
    }}

    map.addLayer({
        'id': '3d-buildings',
        'source': 'composite',
        'source-layer': 'building',
        'filter': ['==', 'extrude', 'true'],
        'type': 'fill-extrusion',
        'minzoom': 15,
        'paint': {
        'fill-extrusion-color': '#aaa',
        // use an 'interpolate' expression to add a smooth transition effect to the
        // buildings as the user zooms in
        'fill-extrusion-height': ["interpolate", ["linear"], ["zoom"], 15, 0, 15.05, ["get", "height"]],
        'fill-extrusion-base': ["interpolate", ["linear"], ["zoom"], 15, 0, 15.05, ["get", "min_height"]],
        'fill-extrusion-opacity': .6 }
    }, labelLayerId); 
   
     
        
        });
        
        
    // SECTIONS
    var chapters = {
        'intro': {
        center: [29.0467, 41.0845],
        zoom: 9.8,
        bearing: 2,
        pitch: 0,
        },
        'gezi': {
        duration: 6000,
        center: [28.986663, 41.037972],
        bearing: -30,
        zoom: 15.5,
        pitch: 30,
        speed: 0.3
        },
        'taksim': {
        duration: 6000,
        bearing: 0,
        center: [28.985087, 41.036925],
        bearing: -40,
        zoom: 16,
        pitch: 0,
        speed: 0.1
        },
        'esayan': {
        duration: 6000,
        center: [28.984048, 41.035048],
        bearing: -30,
        zoom: 18,
        pitch: 30,
        speed: 0.3
        },
        'ataturk': {
        duration: 6000,
        bearing: 0,
        center: [28.983558, 41.034676],
        bearing: 0,
        zoom: 18,
        pitch: 0,
        speed: 0.25
        },
        'tarlabasi': {
        duration: 6000,
        bearing: -15,
        center: [28.979600, 41.036199],
        zoom: 15.6,
        pitch: 0,
        speed: 0.3
        },
        'ttm': {
        duration: 6000,
        center: [28.978000, 41.037861],
        bearing: -30,
        zoom: 17.2,
        pitch: 30,
        speed: 0.3
        },
        'galatasaray': {
        duration: 6000,
        center: [28.97861, 41.032717],
        bearing: -30,
        zoom: 16.8,
        pitch: 40,
        speed: 0.2
        },
        'postacilar': {
        duration: 6000,
        bearing: 0,
        center: [28.977317, 41.029945],
        bearing: -75,
        zoom: 16.7,
        pitch: 20,
        speed: 0.2
        },
        'kumbaraci': {
        duration: 6000,
        center: [28.977347, 41.028009],
        bearing: -40,
        zoom: 16.2,
        pitch: 0,
        speed: 0.3
        },
        'stad': {
        duration: 6000,
        center: [28.973346, 41.032851],    
        bearing: -40,
        zoom: 16.2,
        pitch: 10,
        speed: 0.3
        },
        'tepebasi': {
        duration: 6000,
        center: [28.972728, 41.030601],
        bearing: -40,
        zoom: 16,
        pitch: 10,
        speed: 0.3
        },
        'kule': {
        duration: 6000,
        center: [28.974249, 41.025854,],
        bearing: -30,
        zoom: 16.2,
        pitch: 50,
        speed: 0.3  
        },
        'sur': {
        duration: 6000,
        center: [28.972182, 41.024244],
        bearing: -30.8,
        zoom: 16.2,
        pitch: 11,
        speed: 0.3
        },
        'kamondo': {
        duration: 6000,
        center: [28.973748, 41.023945],
        bearing: -10,
        zoom: 18,
        pitch: 20,
        speed: 0.2
        },
        'karakoy': {
        duration: 6000,
        bearing: 0,
        center: [28.975287, 41.022190],
        zoom: 16.2,
        pitch: 0,
        speed: 0.3
        },
        'end': {
        duration: 6000,
        bearing: 0,
        center: [28.975287, 41.022190],
        zoom: 16,
        pitch: 0
        }

        };
        
        

    //Function to run the story
    // On every scroll event, check which element is on screen
    window.onscroll = function() {
        var chapterNames = Object.keys(chapters);
        for (var i = 0; i < chapterNames.length; i++) {
            var chapterName = chapterNames[i];
                if (isElementOnScreen(chapterName)) {
                    setActiveChapter(chapterName);
                    break; }}
    };
    var activeChapterName = 'intro'; //Change this to match the first chapter of your story
    function setActiveChapter(chapterName) {
        if (chapterName === activeChapterName) return;
        map.flyTo(chapters[chapterName]);
        document.getElementById(chapterName).setAttribute('class', 'active');
        document.getElementById(activeChapterName).setAttribute('class', '');
        activeChapterName = chapterName;
        
      if (activeChapterName == 'esayan') { map.addLayer({
      'id': 'esayan',
      'type': 'fill',
      'source': {
          'type': 'geojson',
          'data': {
          'type': 'Feature',
          'geometry': {
          'type': 'Polygon',
          'coordinates':
      [
          [
            [
              28.983832,
              41.035107
            ],
            [
              28.983936,
              41.035187
            ],
            [
              28.984244,
              41.034965
            ],
            [
              28.984159,
              41.034871
            ],
            [
              28.984071,
              41.034925
            ],
            [
              28.984089,
              41.034959
            ],
            [
              28.984051,
              41.034961
            ],
            [
              28.983832,
              41.035107
            ]
          ]
        ] } } },
      'layout': {},
      'paint': {
      'fill-color': '#f88c99',
      'fill-opacity': 0.7
      }
      }); }
       
      else if (activeChapterName == 'ataturk' ) { map.addLayer({
      'id': 'ataturk',
      'type': 'fill',
      'source': {
          'type': 'geojson',
          'data': {
          'type': 'Feature',
          'geometry': {
          'type': 'Polygon',
          'coordinates':
      [
                      [
                        [ 28.9833,
                          41.034518 ],
                        [
                          28.983395,
                          41.034436
                        ],
                        [
                          28.983698,
                          41.03463
                        ],
                        [
                          28.983473,
                          41.034838
                        ],
                        [
                          28.983356,
                          41.034766
                        ],
                        [
                          28.983463,
                          41.034666
                        ],
                        [
                          28.983433,
                          41.034648
                        ],
                        [
                          28.983406,
                          41.034638
                        ],
                        [
                          28.983443,
                          41.034604
                        ],
                        [ 28.9833,
                          41.034518 ]
                      ]
                    ] } } },
      'layout': {},
      'paint': {
      'fill-color': '#f88c99',
      'fill-opacity': 0.7
      }
      }); 
      map.removeLayer('esayan');
      }
      else if (activeChapterName == 'tarlabasi') { map.removeLayer('ataturk'); }

      else if (activeChapterName == 'ttm' ) { map.addLayer({
      'id': 'ttm',
      'type': 'fill',
      'source': {
          'type': 'geojson',
          'data': {
          'type': 'Feature',
          'geometry': {
          'type': 'Polygon',
          'coordinates':
      [
      [
            [
              28.978006,
              41.037977
            ],
            [
              28.978041,
              41.038002
            ],
            [
              28.978124,
              41.037946
            ],
            [
              28.978095,
              41.037904
            ],
            [
              28.978006,
              41.037977
            ]
          ]
                    ] } } },
      'layout': {},
      'paint': {
      'fill-color': '#f88c99',
      'fill-opacity': 0.7
      }
      }); 
      }
      
      else if (activeChapterName == 'galatasaray' ) { map.addLayer({
      'id': 'galatasaray',
      'type': 'fill',
      'source': {
          'type': 'geojson',
          'data': {
          'type': 'Feature',
          'geometry': {
          'type': 'Polygon',
          'coordinates':
      [
      [
            [
              28.978028,
              41.032775
            ],
            [
              28.978227,
              41.032936
            ],
            [
              28.978456,
              41.032786
            ],
            [
              28.978701,
              41.032975
            ],
            [
              28.9785,
              41.033131
            ],
            [
              28.978681,
              41.033286
            ],
            [
              28.979369,
              41.032808
            ],
            [
              28.979509,
              41.032921
            ],
            [
              28.979605,
              41.032837
            ],
            [
              28.978831,
              41.032208
            ],
            [
              28.978562,
              41.03241
            ],
            [
              28.978522,
              41.032378
            ],
            [
              28.978274,
              41.032546
            ],
            [
              28.978315,
              41.032587
            ],
            [
              28.978028,
              41.032775
            ]
          ]
                    ] } } },
      'layout': {},
      'paint': {
      'fill-color': '#f88c99',
      'fill-opacity': 0.7
      }
      }); 
      map.removeLayer('ttm');
      }
      else if (activeChapterName == 'postacilar' ) { map.addLayer({
      'id': 'postacilar',
      'type': 'fill',
      'source': {
          'type': 'geojson',
          'data': {
          'type': 'Feature',
          'geometry': {
          'type': 'Polygon',
          'coordinates':
      [
        [
            [
              28.975695,
              41.030536
            ],
            [
              28.975693,
              41.030507
            ],
            [
              28.976445,
              41.03034
            ],
            [
              28.976457,
              41.030371
            ],
            [
              28.975695,
              41.030536
            ]
          ]
                ] } } },
      'layout': {},
      'paint': {
      'fill-color': '#f88c99',
      'fill-opacity': 0.7
      }
      }); 
      map.removeLayer('galatasaray');
      }

      else if (activeChapterName == 'kumbaraci') { map.removeLayer('postacilar'); }

      else if (activeChapterName == 'sur' ) { map.addLayer({
      'id': 'sur',
      'type': 'fill',
      'source': {
          'type': 'geojson',
          'data': {
          'type': 'Feature',
          'geometry': {
          'type': 'fill',
          'coordinates':
      [
         [
            [
              28.97273,
              41.025098
            ],
            [
              28.972755,
              41.025078
            ],
            [
              28.973041,
              41.025192
            ],
            [
              28.973018,
              41.025215
            ],
            [
              28.97273,
              41.025098
            ]
          ] ,

          [
            [
              28.971173,
              41.022398
            ],
            [
              28.971199,
              41.022465
            ],
            [
              28.971185,
              41.022469
            ],
            [
              28.971156,
              41.0224
            ],
            [
              28.971173,
              41.022398
            ]
          ] , 

          [
            [
              28.969085,
              41.025058
            ],
            [
              28.969134,
              41.025023
            ],
            [
              28.968837,
              41.02476
            ],
            [
              28.968795,
              41.024783
            ],
            [
              28.969085,
              41.025058
            ]
          ]
        ]        
                 } } },
      'layout': {},
      'paint': {
      'fill-color': '#356fc0',
      'fill-opacity': 0.6
      }
      }); 
      }
      else if (activeChapterName == 'kamondo' ) { map.addLayer({
      'id': 'kamondo',
      'type': 'fill',
      'source': {
          'type': 'geojson',
          'data': {
          'type': 'Feature',
          'geometry': {
          'type': 'Polygon',
          'coordinates':
      [
      [
            [
              28.973723,
              41.023896
            ],
            [
              28.973811,
              41.024045
            ],
            [
              28.97383,
              41.024038
            ],
            [
              28.973742,
              41.023889
            ],
            [
              28.973723,
              41.023896
            ]
          ]
                ] } } },
      'layout': {},
      'paint': {
      'fill-color': '356fc0',
      'fill-opacity': 0.5
      }
      }); 
      map.removeLayer('sur');
      }
      else if (activeChapterName == 'karakoy') { map.removeLayer('kamondo'); }
      else return
      
    };
        
       

    function isElementOnScreen(id) {
        var element = document.getElementById(id);
        var bounds = element.getBoundingClientRect();
        return bounds.top < window.innerHeight && bounds.bottom > 0;
    }

</script>

</body>
</html>
